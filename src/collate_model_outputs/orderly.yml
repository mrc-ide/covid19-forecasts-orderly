script: collate_model_outputs.R
artefacts:
  data:
    description: Collated model outputs (quantiles)
    filenames:
    - unweighted_qntls.rds
    - unweighted_rt_qntls.rds
    - unwtd_rt_samples.rds
packages:
- dplyr
- tidyr
parameters:
- latest_week
depends:
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2020-11-08")
    use:
      unwtd_ensemble_daily_qntls_2020-11-08.rds: ensemble_daily_qntls.rds
      unwtd_ensemble_model_rt_2020-11-08.rds: ensemble_model_rt.rds
      unwtd_ensemble_model_rt_samples_2020-11-08.rds: ensemble_model_rt_samples.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2020-11-15")
    use:
      unwtd_ensemble_daily_qntls_2020-11-15.rds: ensemble_daily_qntls.rds
      unwtd_ensemble_model_rt_2020-11-15.rds: ensemble_model_rt.rds
      unwtd_ensemble_model_rt_samples_2020-11-15.rds: ensemble_model_rt_samples.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2020-11-22")
    use:
      unwtd_ensemble_daily_qntls_2020-11-22.rds: ensemble_daily_qntls.rds
      unwtd_ensemble_model_rt_2020-11-22.rds: ensemble_model_rt.rds
      unwtd_ensemble_model_rt_samples_2020-11-22.rds: ensemble_model_rt_samples.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2020-11-29")
    use:
      unwtd_ensemble_daily_qntls_2020-11-29.rds: ensemble_daily_qntls.rds
      unwtd_ensemble_model_rt_2020-11-29.rds: ensemble_model_rt.rds
      unwtd_ensemble_model_rt_samples_2020-11-29.rds: ensemble_model_rt_samples.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2020-12-06")
    use:
      unwtd_ensemble_daily_qntls_2020-12-06.rds: ensemble_daily_qntls.rds
      unwtd_ensemble_model_rt_2020-12-06.rds: ensemble_model_rt.rds
      unwtd_ensemble_model_rt_samples_2020-12-06.rds: ensemble_model_rt_samples.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2020-12-13")
    use:
      unwtd_ensemble_daily_qntls_2020-12-13.rds: ensemble_daily_qntls.rds
      unwtd_ensemble_model_rt_2020-12-13.rds: ensemble_model_rt.rds
      unwtd_ensemble_model_rt_samples_2020-12-13.rds: ensemble_model_rt_samples.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2020-12-20")
    use:
      unwtd_ensemble_daily_qntls_2020-12-20.rds: ensemble_daily_qntls.rds
      unwtd_ensemble_model_rt_2020-12-20.rds: ensemble_model_rt.rds
      unwtd_ensemble_model_rt_samples_2020-12-20.rds: ensemble_model_rt_samples.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2020-12-27")
    use:
      unwtd_ensemble_daily_qntls_2020-12-27.rds: ensemble_daily_qntls.rds
      unwtd_ensemble_model_rt_2020-12-27.rds: ensemble_model_rt.rds
      unwtd_ensemble_model_rt_samples_2020-12-27.rds: ensemble_model_rt_samples.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2021-01-03")
    use:
      unwtd_ensemble_daily_qntls_2021-01-03.rds: ensemble_daily_qntls.rds
      unwtd_ensemble_model_rt_2021-01-03.rds: ensemble_model_rt.rds
      unwtd_ensemble_model_rt_samples_2021-01-03.rds: ensemble_model_rt_samples.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2021-01-10")
    use:
      unwtd_ensemble_daily_qntls_2021-01-10.rds: ensemble_daily_qntls.rds
      unwtd_ensemble_model_rt_2021-01-10.rds: ensemble_model_rt.rds
      unwtd_ensemble_model_rt_samples_2021-01-10.rds: ensemble_model_rt_samples.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2021-01-17")
    use:
      unwtd_ensemble_daily_qntls_2021-01-17.rds: ensemble_daily_qntls.rds
      unwtd_ensemble_model_rt_2021-01-17.rds: ensemble_model_rt.rds
      unwtd_ensemble_model_rt_samples_2021-01-17.rds: ensemble_model_rt_samples.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2021-01-24")
    use:
      unwtd_ensemble_daily_qntls_2021-01-24.rds: ensemble_daily_qntls.rds
      unwtd_ensemble_model_rt_2021-01-24.rds: ensemble_model_rt.rds
      unwtd_ensemble_model_rt_samples_2021-01-24.rds: ensemble_model_rt_samples.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2021-01-31")
    use:
      unwtd_ensemble_daily_qntls_2021-01-31.rds: ensemble_daily_qntls.rds
      unwtd_ensemble_model_rt_2021-01-31.rds: ensemble_model_rt.rds
      unwtd_ensemble_model_rt_samples_2021-01-31.rds: ensemble_model_rt_samples.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2021-02-07")
    use:
      unwtd_ensemble_daily_qntls_2021-02-07.rds: ensemble_daily_qntls.rds
      unwtd_ensemble_model_rt_2021-02-07.rds: ensemble_model_rt.rds
      unwtd_ensemble_model_rt_samples_2021-02-07.rds: ensemble_model_rt_samples.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2021-02-14")
    use:
      unwtd_ensemble_daily_qntls_2021-02-14.rds: ensemble_daily_qntls.rds
      unwtd_ensemble_model_rt_2021-02-14.rds: ensemble_model_rt.rds
      unwtd_ensemble_model_rt_samples_2021-02-14.rds: ensemble_model_rt_samples.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2021-02-21")
    use:
      unwtd_ensemble_daily_qntls_2021-02-21.rds: ensemble_daily_qntls.rds
      unwtd_ensemble_model_rt_2021-02-21.rds: ensemble_model_rt.rds
      unwtd_ensemble_model_rt_samples_2021-02-21.rds: ensemble_model_rt_samples.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2021-02-28")
    use:
      unwtd_ensemble_daily_qntls_2021-02-28.rds: ensemble_daily_qntls.rds
      unwtd_ensemble_model_rt_2021-02-28.rds: ensemble_model_rt.rds
      unwtd_ensemble_model_rt_samples_2021-02-28.rds: ensemble_model_rt_samples.rds
- prepare_ecdc_data:
    id: latest(parameter:week_ending == latest_week)
    use:
      model_input.rds: latest_deaths_wide_no_filter.rds

script: script.R

artefacts:
  - staticgraph:
      description: Maps of epidemic phase for the week of the report
      filenames:
        - rt_phase_si_2.png
        - country_epidemic_phase.csv
        
sources:
  - R/utils.R

packages:
  - countrycode
  - dplyr  
  - ggplot2
  - glue
  - purrr
  - readr
  - rincewind
  - rnaturalearth 
  - sf
  - snakecase
  - tidyr


parameters:
  - week_ending

depends:
  produce_ensemble_outputs:
    id: latest(parameter:week_ending == week_ending)
    use:
      ensemble_weekly_qntls.rds: ensemble_weekly_qntls.rds
      ensemble_model_rt.rds: ensemble_model_rt.rds 
  prepare_ecdc_data:
    id: latest(parameter:week_ending == week_ending)
    use:
      exclude.rds: exclude.rds
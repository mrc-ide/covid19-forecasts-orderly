script: collate_weekly_outputs.R
artefacts:
  data:
    description: Collated model outputs for all locations
    filenames:
    - us_ensemble_rt_qntls.rds
    - us_ensemble_forecasts_qntls.rds
    - rti0_qntls.rds
    - apeestim_qntls.rds
    - deca_qntls.rds
    - rti0_rt_qntls.rds
    - apeestim_rt_qntls.rds
    - deca_rt_qntls.rds
packages:
- dplyr
- tidyr
- purrr
- tibble
parameters: week_ending
depends:
- run_jointlyr:
    id: latest(parameter:week_ending == "2021-01-01" && parameter:location == "Alabama")
    use:
      rti0_model_outputs_Alabama.rds: rti0_model_outputs.rds
- run_jointlyr:
    id: latest(parameter:week_ending == "2021-01-01" && parameter:location == "California")
    use:
      rti0_model_outputs_California.rds: rti0_model_outputs.rds
- run_deca:
    id: latest(parameter:week_ending == "2021-01-01" && parameter:location == "Alabama")
    use:
      DeCa_latest_Alabama.rds: DeCa_latest.rds
- run_deca:
    id: latest(parameter:week_ending == "2021-01-01" && parameter:location == "California")
    use:
      DeCa_latest_California.rds: DeCa_latest.rds
- run_apeestim:
    id: latest(parameter:week_ending == "2021-01-01" && parameter:location == "Alabama")
    use:
      apeestim_model_outputs_Alabama.rds: apeestim_model_outputs.rds
- run_apeestim:
    id: latest(parameter:week_ending == "2021-01-01" && parameter:location == "California")
    use:
      apeestim_model_outputs_California.rds: apeestim_model_outputs.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2021-01-01" && parameter:location == "Alabama")
    use:
      ensemble_model_rt_Alabama.rds: ensemble_model_rt.rds
      ensemble_daily_qntls_Alabama.rds: ensemble_daily_qntls.rds
- produce_ensemble_outputs:
    id: latest(parameter:week_ending == "2021-01-01" && parameter:location == "California")
    use:
      ensemble_model_rt_California.rds: ensemble_model_rt.rds
      ensemble_daily_qntls_California.rds: ensemble_daily_qntls.rds

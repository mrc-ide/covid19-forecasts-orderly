environment:
  covid_19_path: COVID19_INPUT_PATH

script: produce_longer_forecasts.R

parameters:
  - week_ending
  - use_si

artefacts:
  data:
    description: Projections
    filenames:
      - unweighted_pred_qntls.rds
      - unweighted_reff_qntls.rds
      - unweighted_ps_qntls.rds
      - weighted_across_countries_pred_qntls.rds
      - weighted_across_countries_ps_qntls.rds
      - weighted_across_countries_reff_qntls.rds
      - weighted_per_country_pred_qntls.rds
      - weighted_per_country_ps_qntls.rds
      - weighted_per_country_reff_qntls.rds

packages:
  - purrr
  - stringr
  - projections
  - tidyr
  - incidence
  - rincewind
  - ggplot2
  - patchwork
  - glue
  - snakecase

resources:
  - ecdc_pop2018.csv

sources:
  - R/utils.R
  
depends:
  produce_combined_rt:
    id: latest(parameter:week_ending == week_ending)
    use:
      combined_rt_estimates.rds: combined_rt_estimates.rds
      combined_weighted_estimates_per_country.rds: combined_weighted_estimates_per_country.rds
      combined_weighted_estimates_across_countries.rds: combined_weighted_estimates_across_countries.rds
  produce_epi_params:
    id: latest
    use:
      si_distrs.rds: si_distrs.rds
      population_weighted_ifr.rds: population_weighted_ifr.rds
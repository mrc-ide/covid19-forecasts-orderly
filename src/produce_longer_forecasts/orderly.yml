environment:
  covid_19_path: COVID19_INPUT_PATH

script: produce_longer_forecasts.R

parameters:
  - week_ending
  - use_si

artefacts:
  data:
    description: Projections
    filenames:
      - unwtd_projections.rds
      - wtd_per_country_projections.rds
      - wtd_across_all_projections.rds

packages:
  - purrr
  - stringr
  - projections
  - tidyr
  - incidence
  - rincewind

resources:
  - ecdc_pop2018.csv

depends:
  produce_combined_rt:
    id: latest(parameter:week_ending == week_ending)
    use:
      combined_rt_estimates.rds: combined_rt_estimates.rds
      combined_weighted_estimates_per_country.rds: combined_weighted_estimates_per_country.rds
      combined_weighted_estimates_across_countries.rds: combined_weighted_estimates_across_countries.rds
  produce_epi_params:
    id: latest
    use:
      si_distrs.rds: si_distrs.rds
      cfr_shape_params.rds: cfr_shape_params.rds
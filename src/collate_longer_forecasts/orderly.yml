script: collate_longer_forecasts.R
artefacts:
  data:
    description: Collated model outputs (quantiles)
    filenames:
    - unwtd_projections_qntls.rds
    - wtd_across_all_projections_qntls.rds
    - wtd_per_country_projections_qntls.rds
packages:
- dplyr
- tidyr
- ggdist
- ggplot2
- rincewind
- purrr
- glue
depends:
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-03-29"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-03-29.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-03-29.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-03-29.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-04-05"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-04-05.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-04-05.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-04-05.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-04-12"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-04-12.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-04-12.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-04-12.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-04-19"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-04-19.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-04-19.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-04-19.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-04-26"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-04-26.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-04-26.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-04-26.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-05-03"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-05-03.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-05-03.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-05-03.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-05-10"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-05-10.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-05-10.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-05-10.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-05-17"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-05-17.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-05-17.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-05-17.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-05-24"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-05-24.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-05-24.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-05-24.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-05-31"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-05-31.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-05-31.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-05-31.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-06-07"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-06-07.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-06-07.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-06-07.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-06-14"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-06-14.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-06-14.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-06-14.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-06-21"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-06-21.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-06-21.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-06-21.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-06-28"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-06-28.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-06-28.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-06-28.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-07-05"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-07-05.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-07-05.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-07-05.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-07-12"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-07-12.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-07-12.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-07-12.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-07-19"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-07-19.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-07-19.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-07-19.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-07-26"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-07-26.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-07-26.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-07-26.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-08-02"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-08-02.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-08-02.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-08-02.rds: weighted_per_country_pred_qntls.rds
- produce_longer_forecasts:
    id: latest(parameter:week_ending == "2020-08-09"  && parameter:use_si == "si_2")
    use:
      unweighted_pred_qntls_2020-08-09.rds: unweighted_pred_qntls.rds
      weighted_across_countries_pred_qntls_2020-08-09.rds: weighted_across_countries_pred_qntls.rds
      weighted_per_country_pred_qntls_2020-08-09.rds: weighted_per_country_pred_qntls.rds
- prepare_ecdc_data:
    id: latest
    use:
      latest_deaths_wide_no_filter.rds: latest_deaths_wide_no_filter.rds
